name: Cypress Tests

on:
  push:
    branches:
      - main

jobs:
  cypress:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v3

      - name : install cypress
        run :  npm install cypress --save-dev


      - name : install i
        run : npm i
        
      - name: Install dependencies
        run: npm ci

      - name: Run Cypress tests
        run: npm run cy:run
      
      - name : Send Mail Action
        id : sendmail
        uses :  vineetchoudhary/mailgun-action@master
      with:
        api-key: ${{ secrets.MAILGUN_API_KEY }}
        domain: sandboxb722719f9048484caf21b7386d808f56.mailgun.org
        to: shubprasain@hotmail.com
        cc: shubprasain@aol.com
    - name: Send Mail Action Response
      run: echo "${{ steps.sendmail.outputs.response }}"
